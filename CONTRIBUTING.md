# Contributing

## 目的

- 初見でも「どの規約で書き、どのチェックを通せば良いか」がすぐ分かる状態にする
- レビューで揉めるポイント（命名/ネスト/マジックナンバー/責務）を事前に固定する

## 開発コマンド

```bash
npm run format
npm run format:check
npm run typecheck
npm run lint
npm test
npm run build
```

## 依存関係ポリシー（ベストプラクティス）

- CIでは `npm audit --audit-level=high` を実行し、**high/critical** は放置しません
- 脆弱性対応の基本は以下です
  - `npm audit fix` を試す（破壊的変更を避ける）
  - それで直らない場合、依存の更新（パッチ/マイナー優先）を検討
  - `--force` を使う場合は変更影響が大きいので、必ず動作確認を行う

## コーディング規約（このリポジトリ）

### 1) 初見で一発でわかる

- 省略禁止（変数名/関数名は自己ドキュメント化する）
- 役割が大きい関数は、先頭に Responsibility コメントを付ける

### 2) マジックナンバー禁止

- 制約値・上限値・固定値は定数化し、意図が分かる名前を付ける

### 3) ネスト禁止（早期リターン）

- ガード条件は早期 return
- ガードの場合は「何をガードしたのか」コメントで明記

### 4) DRY原則

- 同じ意図のロジックは 1 箇所に寄せる（定数/ユーティリティ化）

## セキュリティ（必須）

- `.env.local` をコミットしない
- APIキーを Issue / PR / ログに貼らない

詳細: [`docs/security.md`](docs/security.md)

